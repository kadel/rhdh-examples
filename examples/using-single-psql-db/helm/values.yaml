global:
  dynamic:
    includes:
      - dynamic-plugins.default.yaml

    plugins: []

upstream:
  backstage:
    # This is required in order to remove POSTGRESQL_ADMIN_PASSWORD from the environment variables
    #Â https://github.com/redhat-developer/rhdh-chart/blob/dba8d637567b430d6c0b95734b69198ac0b2eb4c/charts/backstage/values.yaml#L127-L137
    extraEnvVarsSecrets:
      - my-rhdh-secrets
    appConfig:
      app:
        title: My RHDH App

      auth:
        providers:
          guest:
            dangerouslyAllowOutsideDevelopment: true
      backend:
        database:
          client: pg
          pluginDivisionMode: schema
          ensureSchemaExists: true
          connection:
            database: ${POSTGRES_DATABASE}
            host: ${POSTGRES_HOST}
            port: ${POSTGRES_PORT}
            user: ${POSTGRES_USER}
            password: ${POSTGRES_PASSWORD}
    extraEnvVars:
      - name: BACKEND_SECRET
        valueFrom:
          secretKeyRef:
            key: backend-secret
            name: '{{ include "janus-idp.backend-secret-name" $ }}'
  postgresql:
    enabled: false
