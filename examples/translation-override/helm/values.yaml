global:
  dynamic:
    includes:
      - dynamic-plugins.default.yaml

    plugins: []

upstream:
  backstage:
    extraEnvVarsSecrets:
      - my-rhdh-secrets
    appConfig:
      app:
        title: My RHDH App

      auth:
        providers:
          guest:
            dangerouslyAllowOutsideDevelopment: true
      i18n:
        locales:
          - en
        overrides:
          - /opt/app-root/src/translations/allTranslations.json
    extraVolumeMounts:
      # we need to copy whole extraVolumeMounts directory form original values.yaml beucase there is no way to 
      # easily extend arrays in helm
      - mountPath: /opt/app-root/src/dynamic-plugins-root
        name: dynamic-plugins-root
      - name: temp
        mountPath: /tmp
      #  this is what is specific to this example
      - mountPath: /opt/app-root/src/translations/
        name: all-translations

    extraVolumes:
      # we need to copy whole extraVolumes directory form original values.yaml beucase there is no way to 
      # easily extend arrays in helm
      - ephemeral:
          volumeClaimTemplate:
            spec:
              accessModes:
                - ReadWriteOnce
              resources:
                requests:
                  storage: 1Gi
        name: dynamic-plugins-root
      - configMap:
          defaultMode: 420
          name: dynamic-plugins
          optional: true
        name: dynamic-plugins
      - name: dynamic-plugins-npmrc
        secret:
          defaultMode: 420
          optional: true
          secretName: '{{ printf "%s-dynamic-plugins-npmrc" .Release.Name }}'
      - name: dynamic-plugins-registry-auth
        secret:
          defaultMode: 416
          optional: true
          secretName: '{{ printf "%s-dynamic-plugins-registry-auth" .Release.Name }}'
      - name: npmcacache
        emptyDir: {}
      - name: temp
        emptyDir: {}
      #  this is what is specific to this example
      - name: all-translations
        configMap:
          name: all-translations
